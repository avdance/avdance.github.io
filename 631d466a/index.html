<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/avdance32_32.ico"><link rel="icon" type="image/png" sizes="16x16" href="/images/avdance16_16.ico"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"blog.avdancedu.com",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!0,pangu:!1,comments:{style:"tabs",active:"valine",storage:!0,lazyload:!1,nav:null,activeClass:"valine"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!1,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="同学们在学习《音视频课小白系统入门》这门课的过程中，经常遇到一些问题，如Mac系统下为什么无法编译ffmpeg? Xcode编译课程中的程序为什么不成功? 为什么我从设备中读的数据很小?等等不足而一。 实际上，大部分同学提出的问题都是重复的。因此，我将一些最常见的问题整理出了答案放在这里，同学们可以根据自己的情况去查找相应的解决办法，以免我个人原因不能及时回答问题时，给大家的学习造成麻烦和不便。"><meta property="og:type" content="article"><meta property="og:title" content="音视频系统入门常见问题"><meta property="og:url" content="https://blog.avdancedu.com/631d466a/index.html"><meta property="og:site_name" content="音视跳动科技"><meta property="og:description" content="同学们在学习《音视频课小白系统入门》这门课的过程中，经常遇到一些问题，如Mac系统下为什么无法编译ffmpeg? Xcode编译课程中的程序为什么不成功? 为什么我从设备中读的数据很小?等等不足而一。 实际上，大部分同学提出的问题都是重复的。因此，我将一些最常见的问题整理出了答案放在这里，同学们可以根据自己的情况去查找相应的解决办法，以免我个人原因不能及时回答问题时，给大家的学习造成麻烦和不便。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.avdancedu.com/image/article/av_base/question.jpg"><meta property="og:image" content="https://cdn.avdancedu.com/image/article/av_base/sandbox.png"><meta property="og:image" content="https://cdn.avdancedu.com/image/article/av_base/hardened.png"><meta property="og:image" content="https://cdn.avdancedu.com/image/article/av_base/mac_error.png"><meta property="og:image" content="https://cdn.avdancedu.com/image/article/av_base/nopriv.jpg"><meta property="og:image" content="https://cdn.avdancedu.com/image/article/av_base/info.jpg"><meta property="og:image" content="https://cdn.avdancedu.com/image/article/av_base/priv2.jpg"><meta property="og:image" content="https://cdn.avdancedu.com/image/article/av_base/unsigned.jpg"><meta property="og:image" content="https://cdn.avdancedu.com/image/article/av_base/mingw_error.png"><meta property="article:published_time" content="2020-05-30T16:19:12.000Z"><meta property="article:modified_time" content="2022-11-20T05:02:05.511Z"><meta property="article:author" content="音视跳动"><meta property="article:tag" content="ffmpeg"><meta property="article:tag" content="音视频"><meta property="article:tag" content="直播"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.avdancedu.com/image/article/av_base/question.jpg"><link rel="canonical" href="https://blog.avdancedu.com/631d466a/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>音视频系统入门常见问题 | 音视跳动科技</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="音视跳动科技" type="application/atom+xml"></head><body itemscope itemtype="https://schema.org/WebPage"><div class="container"><div class="headband"></div><div id="needsharebutton-float"><span class="btn"><i class="fa fa-share-alt" aria-hidden="true"></i></span></div><header class="header" itemscope itemtype="https://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">音视跳动科技</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">传播最前沿的科技知识！</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i> 首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i> 归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i> 关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/avdance" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="https://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.avdancedu.com/631d466a/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="image" content="/images/avdancelogo.jpg"><meta itemprop="name" content="音视跳动"><meta itemprop="description" content="传输最前沿的科技知识，学习音视频的圣地！ffmpeg, webrtc, H264, AAC"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="音视跳动科技"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> 音视频系统入门常见问题</h1><div class="post-meta"><i class="fa fa-thumb-tack"></i> <font color="7D26CD">置顶</font> <span class="post-meta-divider">|</span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-05-31 00:19:12" itemprop="dateCreated datePublished" datetime="2020-05-31T00:19:12+08:00">2020-05-31</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-11-20 13:02:05" itemprop="dateModified" datetime="2022-11-20T13:02:05+08:00">2022-11-20</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/%E9%9F%B3%E8%A7%86%E9%A2%91/" itemprop="url" rel="index"><span itemprop="name">音视频</span></a></span></span><span id="/631d466a/" class="post-meta-item leancloud_visitors" data-flag-title="音视频系统入门常见问题" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/631d466a/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/631d466a/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>5k</span></span></div></header><div class="post-body" itemprop="articleBody"><p><img data-src="https://cdn.avdancedu.com/image/article/av_base/question.jpg"></p><p>同学们在学习《音视频课小白系统入门》这门课的过程中，经常遇到一些问题，如Mac系统下为什么无法编译ffmpeg? Xcode编译课程中的程序为什么不成功? 为什么我从设备中读的数据很小?等等不足而一。</p><p>实际上，大部分同学提出的问题都是重复的。因此，我将一些最常见的问题整理出了答案放在这里，同学们可以根据自己的情况去查找相应的解决办法，以免我个人原因不能及时回答问题时，给大家的学习造成麻烦和不便。</p><span id="more"></span><h2 id="关闭xcode沙盒和Hardened"><a href="#关闭xcode沙盒和Hardened" class="headerlink" title="关闭xcode沙盒和Hardened"></a>关闭xcode沙盒和Hardened</h2><p>使用xcode访问音视频设备时，需要先将沙盒和Hardened选项关掉，操作步骤如下：</p><p><img data-src="https://cdn.avdancedu.com/image/article/av_base/sandbox.png"><br><img data-src="https://cdn.avdancedu.com/image/article/av_base/hardened.png"></p><h2 id="Q-遇到下面的问题该怎么办？"><a href="#Q-遇到下面的问题该怎么办？" class="headerlink" title="Q: 遇到下面的问题该怎么办？"></a>Q: 遇到下面的问题该怎么办？</h2><p><img data-src="https://cdn.avdancedu.com/image/article/av_base/mac_error.png"></p><p>如果你的程序可以正常运行，这个错误可以忽略，这应该是Mac新版本引入的问题。</p><h2 id="Q-在-Mac-10-15-3-系统下编译-ffmpeg-成功后，在运行-ffmpeg-命令时出现crash"><a href="#Q-在-Mac-10-15-3-系统下编译-ffmpeg-成功后，在运行-ffmpeg-命令时出现crash" class="headerlink" title="Q: 在 Mac 10.15.3 系统下编译 ffmpeg 成功后，在运行 ffmpeg 命令时出现crash."></a>Q: 在 Mac 10.15.3 系统下编译 ffmpeg 成功后，在运行 ffmpeg 命令时出现crash.</h2><p>A: 重新编译ffmpeg，在执行 .&#x2F;configure 时增加 –extra-cflags&#x3D;”fno-static-check” 选项，注意该选项一定要放在前面，否则编译有问题。</p><h2 id="Q-在Mac下添加-–extra-cflags-x3D-”fno-static-check”-选项仍然-crash"><a href="#Q-在Mac下添加-–extra-cflags-x3D-”fno-static-check”-选项仍然-crash" class="headerlink" title="Q: 在Mac下添加 –extra-cflags&#x3D;”fno-static-check” 选项仍然 crash"></a>Q: 在Mac下添加 –extra-cflags&#x3D;”fno-static-check” 选项仍然 crash</h2><p>A: 编译时保持尽量少的参数，应该是与其它一些参数有突冲。</p><h2 id="Q-无论通过何种方式编译出的ffmpeg都会引发crash，如何解决？"><a href="#Q-无论通过何种方式编译出的ffmpeg都会引发crash，如何解决？" class="headerlink" title="Q: 无论通过何种方式编译出的ffmpeg都会引发crash，如何解决？"></a>Q: 无论通过何种方式编译出的ffmpeg都会引发crash，如何解决？</h2><p>A: 那就只能用命令的方式安装ffmpeg了，执行 <code>brew install ffmpeg</code>即可。</p><h2 id="Q-在Mac下，通过命令方式安装的ffmpeg没有带fdk-aac库怎么办"><a href="#Q-在Mac下，通过命令方式安装的ffmpeg没有带fdk-aac库怎么办" class="headerlink" title="Q: 在Mac下，通过命令方式安装的ffmpeg没有带fdk-aac库怎么办?"></a>Q: 在Mac下，通过命令方式安装的ffmpeg没有带fdk-aac库怎么办?</h2><p>A: 以命令方式安装带 fdk-aac 的ffmpeg需要按下面的步骤执行:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">0. brew unstall ffmpeg</span><br><span class="line">1. brew tap homebrew-ffmpeg/ffmpeg</span><br><span class="line">2. brew install homebrew-ffmpeg/ffmpeg/ffmpeg --with-fdk-aac</span><br></pre></td></tr></table></figure><p>注意，安装时如果报<code>ERROR: libsnappy not found</code> 错误，则你需要到<code>https://github.com/google/snappy</code>下载源码，并按照项目的说明编译并安装snappy库。</p><p>安装好snappy库后，重新执行<code>brew install homebrew-ffmpeg/ffmpeg/ffmpeg --with-fdk-aac</code>命令。</p><h2 id="Q-在Mac下通过命令方式安装ffmpeg库时，如何能带上其它第三方库呢？如x264"><a href="#Q-在Mac下通过命令方式安装ffmpeg库时，如何能带上其它第三方库呢？如x264" class="headerlink" title="Q: 在Mac下通过命令方式安装ffmpeg库时，如何能带上其它第三方库呢？如x264"></a>Q: 在Mac下通过命令方式安装ffmpeg库时，如何能带上其它第三方库呢？如x264</h2><p>A: 与上面安装ffmpeg带fdk-aac库的命令是类似的，命令格式为: <code>brew install ffmpeg --with-xxxx</code>，添加某个库的具体参数可以通过<code>homebrew-ffmpeg/ffmpeg/ffmpeg</code> 来查找。</p><h2 id="Q-Xcode-编译课程中的程序成功，但执行失败，报的错误是没有权限该如何解决？"><a href="#Q-Xcode-编译课程中的程序成功，但执行失败，报的错误是没有权限该如何解决？" class="headerlink" title="Q: Xcode 编译课程中的程序成功，但执行失败，报的错误是没有权限该如何解决？"></a>Q: Xcode 编译课程中的程序成功，但执行失败，报的错误是没有权限该如何解决？</h2><p>A:<br><img data-src="https://cdn.avdancedu.com/image/article/av_base/nopriv.jpg"></p><p>如果是上面这种错误信息，解决办法是: 在编译课程中的例子时，先将将沙盒关闭掉，在info.list中增加访问mic phone 访问权限。具体操作如下图所示:</p><p><img data-src="https://cdn.avdancedu.com/image/article/av_base/info.jpg"></p><h2 id="Q-info-plist加了权限仍然报没有权限怎么解决？"><a href="#Q-info-plist加了权限仍然报没有权限怎么解决？" class="headerlink" title="Q: info.plist加了权限仍然报没有权限怎么解决？"></a>Q: info.plist加了权限仍然报没有权限怎么解决？</h2><p>A: 按下图操作试试<br><img data-src="https://cdn.avdancedu.com/image/article/av_base/priv2.jpg"></p><h2 id="Q-引入ffmpeg库后，报libavformat-xxx-dylib-未签名，错误信息类似”code-signature…not-valid”"><a href="#Q-引入ffmpeg库后，报libavformat-xxx-dylib-未签名，错误信息类似”code-signature…not-valid”" class="headerlink" title="Q: 引入ffmpeg库后，报libavformat.xxx.dylib 未签名，错误信息类似”code signature…not valid”"></a>Q: 引入ffmpeg库后，报libavformat.xxx.dylib 未签名，错误信息类似”code signature…not valid”</h2><p>A:<br><img data-src="https://cdn.avdancedu.com/image/article/av_base/unsigned.jpg"><br>如果像上图所展示的一样，则按下面步骤操作：</p><ul><li><ol><li>打开 Mac 中的 keychain Access.app, 选择“我的证书”</li></ol></li><li><ol start="2"><li>执行 codesign -f -s “证书名” xxx.dylib</li></ol></li><li><ol start="3"><li>为了避免逐个签名，可以进行批量操作 codesign -f -s “证书名” &#x2F;usr&#x2F;local&#x2F;ffmpeg&#x2F;lib&#x2F;*.dylib</li></ol></li></ul><h2 id="Q-ffmpeg-执行时提示没有权限执行ffmpeg"><a href="#Q-ffmpeg-执行时提示没有权限执行ffmpeg" class="headerlink" title="Q: ffmpeg 执行时提示没有权限执行ffmpeg"></a>Q: ffmpeg 执行时提示没有权限执行ffmpeg</h2><p>A: 将目录切换到你自己的用户目录下再执行ffmpeg试试。</p><h2 id="Q-在Linux虚似机中每次获取的音频数据很小，只有64个字节，如果进行重采样？"><a href="#Q-在Linux虚似机中每次获取的音频数据很小，只有64个字节，如果进行重采样？" class="headerlink" title="Q: 在Linux虚似机中每次获取的音频数据很小，只有64个字节，如果进行重采样？"></a>Q: 在Linux虚似机中每次获取的音频数据很小，只有64个字节，如果进行重采样？</h2><p>A: ffmpeg中最低采样个数为32个，所以只有 64 字节数据时，是无进行重采样的。解决办法是将数据放到一个缓冲区中，积攒到一定大小后，再进行重采样。</p><h2 id="Q-在从设备采体音频数据时，返回错误-35"><a href="#Q-在从设备采体音频数据时，返回错误-35" class="headerlink" title="Q: 在从设备采体音频数据时，返回错误 -35"></a>Q: 在从设备采体音频数据时，返回错误 -35</h2><p>A: 说明你的设备现在暂时还没准备好，此时你应该等待它几秒，之后就可以正常读数据了。例如：<br></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">while(ret=av_read_frame(...))&#123;</span><br><span class="line">   if(ret==-35) &#123;</span><br><span class="line">       sleep(1);</span><br><span class="line">       continue;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   if(ret &lt; 0)&#123;</span><br><span class="line">       break; </span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   //说明读到了数据</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h2 id="Q-在编码时，编码器返回-35-错误"><a href="#Q-在编码时，编码器返回-35-错误" class="headerlink" title="Q: 在编码时，编码器返回 -35 错误"></a>Q: 在编码时，编码器返回 -35 错误</h2><p>A: 此时说明编码器没有准备好，像上面的一样需要等待一会儿。</p><h2 id="Q-采集到的音频数据编码-AAC-时，报无法找到libfdk-aac库"><a href="#Q-采集到的音频数据编码-AAC-时，报无法找到libfdk-aac库" class="headerlink" title="Q: 采集到的音频数据编码 AAC 时，报无法找到libfdk-aac库"></a>Q: 采集到的音频数据编码 AAC 时，报无法找到libfdk-aac库</h2><p>A: 如果是通过命令安装的ffmepg，则上面已经给了答案。下面的方案是通过源码编译出带fdk-aac的ffmeg。具体步骤如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 安装好 fdk-aac库</span><br><span class="line">2. 重新在ffmpeg源码目录下执行./configure 并增加--enable-libfdk-aac 参数</span><br><span class="line">3. make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h2 id="Q-在Linux中何采集音频数据"><a href="#Q-在Linux中何采集音频数据" class="headerlink" title="Q: 在Linux中何采集音频数据"></a>Q: 在Linux中何采集音频数据</h2><p>A: ffmpeg -f alsa -i hw:0,0 xxx.wav</p><h2 id="Q-在-Linux-中找不到-alsa-设备"><a href="#Q-在-Linux-中找不到-alsa-设备" class="headerlink" title="Q: 在 Linux 中找不到 alsa 设备"></a>Q: 在 Linux 中找不到 alsa 设备</h2><p>A：可以通过 arecord -l 查看你linux系统下有哪些音频设备。如果没有alsa, 可以使用 oss.<br>或安装alsa,安装方法如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install alsa-base alsa-utils alsa-source libasound2-dev</span><br></pre></td></tr></table></figure><p>当然，安装完alsa还只是完成了第一步，由于系统一开始没有alsa，所以你之前编译的ffmpeg是不包含alsa模块的，此时你需要到ffmpeg源码中，重新执行<code>./configure...</code>生成Makefile，之后执行<code>make install</code>进行编译安装</p><h2 id="Q-编译ffmpeg-时-filter-编译不过"><a href="#Q-编译ffmpeg-时-filter-编译不过" class="headerlink" title="Q: 编译ffmpeg 时 filter 编译不过"></a>Q: 编译ffmpeg 时 filter 编译不过</h2><p>A：选择使用 libstdc++ 库试试</p><h2 id="Q-Windows下编译ffmpeg"><a href="#Q-Windows下编译ffmpeg" class="headerlink" title="Q: Windows下编译ffmpeg"></a>Q: Windows下编译ffmpeg</h2><p>A: <a target="_blank" rel="noopener" href="https://trac.ffmpeg.org/wiki/CompilationGuide/MinGW">https://trac.ffmpeg.org/wiki/CompilationGuide/MinGW</a></p><h2 id="Q-AAC-编码为-AAC-HE-V2-时，声音与原始声音不一样"><a href="#Q-AAC-编码为-AAC-HE-V2-时，声音与原始声音不一样" class="headerlink" title="Q: AAC 编码为 AAC_HE_V2 时，声音与原始声音不一样"></a>Q: AAC 编码为 AAC_HE_V2 时，声音与原始声音不一样</h2><p>A：这是因为老师用的 AAC 版本比较老，老版本的 AAC 与新版本的 AAC 可能有一些差异，这个我会后面查找一下原因。大家测试时可以将profile修改为 AAC HE 或 AAC LC，这样就可以正常编码出 AAC 数据了。</p><h2 id="Q-库已经安装好了，但仍报找不到它的错误？"><a href="#Q-库已经安装好了，但仍报找不到它的错误？" class="headerlink" title="Q: 库已经安装好了，但仍报找不到它的错误？"></a>Q: 库已经安装好了，但仍报找不到它的错误？</h2><p>A：首先确认是否已经将 <code>pkg-config</code>工具安装好了。可以执行下面的命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg-config</span><br></pre></td></tr></table></figure><p>如果提示没有安装，则先将该工具安装好，安装命令如下：</p><ul><li>ubuntu<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt intall pkg-config</span><br></pre></td></tr></table></figure></li><li>mac<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install pkg-config</span><br></pre></td></tr></table></figure></li><li>cygwin<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-cyg install pkg-config</span><br></pre></td></tr></table></figure></li><li>centos<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install pkg-config</span><br></pre></td></tr></table></figure> 安装完该工具后仍然报错？那再按照具体的错误看下面的解决方案吧。</li></ul><h2 id="Q-libx264库找不到（-ERROR-libx264-not-found-）"><a href="#Q-libx264库找不到（-ERROR-libx264-not-found-）" class="headerlink" title="Q: libx264库找不到（[ERROR: libx264 not found]）"></a>Q: libx264库找不到（[ERROR: libx264 not found]）</h2><p>A:<br>该问题可能由下面三个方面的问题引起。</p><ul><li>libx264库没有安装。对于这种情况有两种解决办法:<ul><li>其一，是通过平台的安装工作进行安装，如 apt&#x2F;brew&#x2F;yum install x264。（注：在Linux下应该安装 libx264-dev）。</li><li>其二，是通过源码安装，步骤如下：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. wget https://code.videolan.org/videolan/x264/-/archive/master/x264-master.tar.bz2</span><br><span class="line">2. bunzip2 last_x264.tar.bz2</span><br><span class="line">3. tar -vxf last_x264.tar</span><br><span class="line">4. ./configure --enable-static --enable-shared --disable-asm --disable-avs</span><br><span class="line">5. make &amp;&amp; sudo make install</span><br></pre></td></tr></table></figure></li></ul></li><li>通过 pkg-config 命令无法找到。对于这类问题，我们可以使用下面的命 <code>pkg-config --cflags --lib libx264</code>看是否可以找到 libx264，如果找不到，就说明确实是这个问题。解决的办法是设置环境变量。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/xxx/xxx/lib/pkgconfig</span><br></pre></td></tr></table></figure> 其中 <code>xxx</code> 由你的实际路径代替。</li></ul><blockquote><p>注，有可能你的系统中并没有装 pkg-config工具，可以使用 brew&#x2F;apt&#x2F;yum install pkg-config进行安装。</p></blockquote><ul><li>无法链接上libx264, 这是由于通过环境变量 LD_LIBRARY_PATH 无法定位到 libx264库。解决的办法也很简单，与上面类似，可以通过设置环境变量来解决该问题。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export LD_LIBRARY_PATH=$LIB_LIBRARY_PATH:/xxx/xxx/lib</span><br></pre></td></tr></table></figure> 其中，<code>xxx</code>由你的实际路径代替。</li></ul><p>当然，你也可以将环境变量设置在脚本里，这样就不用每次都写export命令了。只需要将上面的两条语句加入到 ~&#x2F;.bashrc &#x2F; 或~&#x2F;.bash_profile 文件里，然后在控制台执行 <code>source ~/.bashrc</code> 或 <code>source ~/.bash_profile</code>即可。</p><h2 id="Q-通过-avcodec-find-encoder-by-name-无法找到编码器"><a href="#Q-通过-avcodec-find-encoder-by-name-无法找到编码器" class="headerlink" title="Q: 通过 avcodec_find_encoder_by_name() 无法找到编码器"></a>Q: 通过 avcodec_find_encoder_by_name() 无法找到编码器</h2><p>A：通过以下步骤进行解决</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0. 你使用的ffmpeg必须是经过源码编译的</span><br><span class="line">1. 你在编译 ffmpeg 时，执行./configure时是否将此编码器模块添加到 ffmpeg中了？以 fdk_aac 为例，在执行 ./configure …时你应该加上 --enable-libfdk-aac 选项。</span><br><span class="line">2. 如果通过源码编译ffmpeg时有报错，请根据错误信息查看本文档的相应处理方法</span><br><span class="line">3. 确保 pkg-config 命令查询到的是你通过源码编译的ffmpeg库</span><br></pre></td></tr></table></figure><h2 id="Q-编译不出ffplay"><a href="#Q-编译不出ffplay" class="headerlink" title="Q: 编译不出ffplay"></a>Q: 编译不出ffplay</h2><p>A：引起该问题有以下几方面的原因：</p><ul><li>所使用的操作系统没有安装图形库。如有的同学在阿里的云服务器上想安装ffplay是肯定不行的。</li><li>没有安装 SDL2 库。解决办法是通过 brew&#x2F;apt&#x2F;yum install sdl2 即可 或 通过 SDL2 源码安装。<strong>安装完成后，要重新进行到 ffmpeg目录下，执行 .&#x2F;configure…这指命令。</strong></li><li>有的同学编译ffmpeg时，在ffmpeg目录执行.&#x2F;configure …时没有添加 –enable-sdl2 选项也会导致无法编译出 ffplay</li><li>SDL2与最新的Mac系统 mojave不兼容。解决办法：<ul><li>方法一</li><li>从 <a target="_blank" rel="noopener" href="https://www.libsdl.org/tmp/release/SDL2-2.0.9.tar.gz">SDL</a>下载 2.0.9版本或以后的SDL2代码。</li><li>执行 .&#x2F;configure</li><li>执行 make &amp;&amp; sudo make install</li><li>执行 export PKG_CONFIG_PATH&#x3D;$PKG_CONFIG_PATH:&#x2F;usr&#x2F;local&#x2F;lib&#x2F;pkgconfig</li><li>[重新]编译ffmpeg</li><li>方法二</li><li>从<a target="_blank" rel="noopener" href="https://www.libsdl.org/tmp/release/SDL2-2.0.9.dmg">SDL</a>下载dmg包。</li><li>执行 open SDL2-2.0.9.dmg</li><li>[重新]编译ffmpeg</li></ul></li><li>如果是ubuntu系统可以用下面的命令安装<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install sdl2-dev</span><br></pre></td></tr></table></figure></li></ul><h2 id="Q-非Mac同学如何学习本课程"><a href="#Q-非Mac同学如何学习本课程" class="headerlink" title="Q: 非Mac同学如何学习本课程"></a>Q: 非Mac同学如何学习本课程</h2><p>A：本课程中的例子的界面是由 Swift 编写的，如果你没有 Mac 系统的话，你可以用 Qt 甚至不用界面开发，代码中与ffmpeg相着的代码都是跨平台的。</p><h2 id="Q-在windows下的mingw环境中出现下面错误该如何解决？"><a href="#Q-在windows下的mingw环境中出现下面错误该如何解决？" class="headerlink" title="Q: 在windows下的mingw环境中出现下面错误该如何解决？"></a>Q: 在windows下的mingw环境中出现下面错误该如何解决？</h2><p>A:<br><img data-src="https://cdn.avdancedu.com/image/article/av_base/mingw_error.png"><br>安装一下工具链，命令如下：pacman -S gcc mingw-w64-x86_64-toolchain yasm mingw-w64-x86_64-SDL2 make diffutils pkg-config</p><h2 id="Q-为什么-avformat-open-input返回错误码-22？"><a href="#Q-为什么-avformat-open-input返回错误码-22？" class="headerlink" title="Q: 为什么 avformat_open_input返回错误码 -22？"></a>Q: 为什么 avformat_open_input返回错误码 -22？</h2><p>A: 将avformat_open_input中的第一个参数，上下文（ctx）初始化为NULL。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://coding.imooc.com/class/415.html?mc_marking=b587280c0c1c0e76c1092aa21406565a&mc_channel=syb6">音视频小白系统入门课</a></p></div><div class="reward-container"><div></div> <button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'> 打赏</button><div id="qr" style="display:none"><div style="display:inline-block"> <img src="https://cdn.avdancedu.com/image/next/wechat.jpeg" alt="音视跳动 微信支付"><p>微信支付</p></div><div style="display:inline-block"> <img src="https://cdn.avdancedu.com/image/next/alipay.jpeg" alt="音视跳动 支付宝"><p>支付宝</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 音视跳动-李超 [avdance@163.com]</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://blog.avdancedu.com/631d466a/" title="音视频系统入门常见问题">https://blog.avdancedu.com/631d466a/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="followme"><p>欢迎关注我的其它发布渠道</p><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="https://cdn.avdancedu.com/image/next/WeChat.jpeg"><span class="icon"><i class="fa fa-wechat"></i></span> <span class="label">WeChat</span></a></div><div class="social-item"><a target="_blank" class="social-link" href="/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/ffmpeg/" rel="tag"><i class="fa fa-tag"></i> ffmpeg</a><a href="/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/" rel="tag"><i class="fa fa-tag"></i> 音视频</a><a href="/tags/%E7%9B%B4%E6%92%AD/" rel="tag"><i class="fa fa-tag"></i> 直播</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2ef51851/" rel="prev" title="hexo博客系统的实现原理与搭建"><i class="fa fa-chevron-left"></i> hexo博客系统的实现原理与搭建</a></div><div class="post-nav-item"> <a href="/1ed22639/" rel="next" title="Go的性能究竟如何？">Go的性能究竟如何？<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E9%97%ADxcode%E6%B2%99%E7%9B%92%E5%92%8CHardened"><span class="nav-number">1.</span> <span class="nav-text">关闭xcode沙盒和Hardened</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E9%81%87%E5%88%B0%E4%B8%8B%E9%9D%A2%E7%9A%84%E9%97%AE%E9%A2%98%E8%AF%A5%E6%80%8E%E4%B9%88%E5%8A%9E%EF%BC%9F"><span class="nav-number">2.</span> <span class="nav-text">Q: 遇到下面的问题该怎么办？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E5%9C%A8-Mac-10-15-3-%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%BC%96%E8%AF%91-ffmpeg-%E6%88%90%E5%8A%9F%E5%90%8E%EF%BC%8C%E5%9C%A8%E8%BF%90%E8%A1%8C-ffmpeg-%E5%91%BD%E4%BB%A4%E6%97%B6%E5%87%BA%E7%8E%B0crash"><span class="nav-number">3.</span> <span class="nav-text">Q: 在 Mac 10.15.3 系统下编译 ffmpeg 成功后，在运行 ffmpeg 命令时出现crash.</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E5%9C%A8Mac%E4%B8%8B%E6%B7%BB%E5%8A%A0-%E2%80%93extra-cflags-x3D-%E2%80%9Dfno-static-check%E2%80%9D-%E9%80%89%E9%A1%B9%E4%BB%8D%E7%84%B6-crash"><span class="nav-number">4.</span> <span class="nav-text">Q: 在Mac下添加 –extra-cflags&#x3D;”fno-static-check” 选项仍然 crash</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E6%97%A0%E8%AE%BA%E9%80%9A%E8%BF%87%E4%BD%95%E7%A7%8D%E6%96%B9%E5%BC%8F%E7%BC%96%E8%AF%91%E5%87%BA%E7%9A%84ffmpeg%E9%83%BD%E4%BC%9A%E5%BC%95%E5%8F%91crash%EF%BC%8C%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%EF%BC%9F"><span class="nav-number">5.</span> <span class="nav-text">Q: 无论通过何种方式编译出的ffmpeg都会引发crash，如何解决？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E5%9C%A8Mac%E4%B8%8B%EF%BC%8C%E9%80%9A%E8%BF%87%E5%91%BD%E4%BB%A4%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85%E7%9A%84ffmpeg%E6%B2%A1%E6%9C%89%E5%B8%A6fdk-aac%E5%BA%93%E6%80%8E%E4%B9%88%E5%8A%9E"><span class="nav-number">6.</span> <span class="nav-text">Q: 在Mac下，通过命令方式安装的ffmpeg没有带fdk-aac库怎么办?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E5%9C%A8Mac%E4%B8%8B%E9%80%9A%E8%BF%87%E5%91%BD%E4%BB%A4%E6%96%B9%E5%BC%8F%E5%AE%89%E8%A3%85ffmpeg%E5%BA%93%E6%97%B6%EF%BC%8C%E5%A6%82%E4%BD%95%E8%83%BD%E5%B8%A6%E4%B8%8A%E5%85%B6%E5%AE%83%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E5%91%A2%EF%BC%9F%E5%A6%82x264"><span class="nav-number">7.</span> <span class="nav-text">Q: 在Mac下通过命令方式安装ffmpeg库时，如何能带上其它第三方库呢？如x264</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-Xcode-%E7%BC%96%E8%AF%91%E8%AF%BE%E7%A8%8B%E4%B8%AD%E7%9A%84%E7%A8%8B%E5%BA%8F%E6%88%90%E5%8A%9F%EF%BC%8C%E4%BD%86%E6%89%A7%E8%A1%8C%E5%A4%B1%E8%B4%A5%EF%BC%8C%E6%8A%A5%E7%9A%84%E9%94%99%E8%AF%AF%E6%98%AF%E6%B2%A1%E6%9C%89%E6%9D%83%E9%99%90%E8%AF%A5%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%EF%BC%9F"><span class="nav-number">8.</span> <span class="nav-text">Q: Xcode 编译课程中的程序成功，但执行失败，报的错误是没有权限该如何解决？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-info-plist%E5%8A%A0%E4%BA%86%E6%9D%83%E9%99%90%E4%BB%8D%E7%84%B6%E6%8A%A5%E6%B2%A1%E6%9C%89%E6%9D%83%E9%99%90%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%EF%BC%9F"><span class="nav-number">9.</span> <span class="nav-text">Q: info.plist加了权限仍然报没有权限怎么解决？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E5%BC%95%E5%85%A5ffmpeg%E5%BA%93%E5%90%8E%EF%BC%8C%E6%8A%A5libavformat-xxx-dylib-%E6%9C%AA%E7%AD%BE%E5%90%8D%EF%BC%8C%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%E7%B1%BB%E4%BC%BC%E2%80%9Dcode-signature%E2%80%A6not-valid%E2%80%9D"><span class="nav-number">10.</span> <span class="nav-text">Q: 引入ffmpeg库后，报libavformat.xxx.dylib 未签名，错误信息类似”code signature…not valid”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-ffmpeg-%E6%89%A7%E8%A1%8C%E6%97%B6%E6%8F%90%E7%A4%BA%E6%B2%A1%E6%9C%89%E6%9D%83%E9%99%90%E6%89%A7%E8%A1%8Cffmpeg"><span class="nav-number">11.</span> <span class="nav-text">Q: ffmpeg 执行时提示没有权限执行ffmpeg</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E5%9C%A8Linux%E8%99%9A%E4%BC%BC%E6%9C%BA%E4%B8%AD%E6%AF%8F%E6%AC%A1%E8%8E%B7%E5%8F%96%E7%9A%84%E9%9F%B3%E9%A2%91%E6%95%B0%E6%8D%AE%E5%BE%88%E5%B0%8F%EF%BC%8C%E5%8F%AA%E6%9C%8964%E4%B8%AA%E5%AD%97%E8%8A%82%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%BF%9B%E8%A1%8C%E9%87%8D%E9%87%87%E6%A0%B7%EF%BC%9F"><span class="nav-number">12.</span> <span class="nav-text">Q: 在Linux虚似机中每次获取的音频数据很小，只有64个字节，如果进行重采样？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E5%9C%A8%E4%BB%8E%E8%AE%BE%E5%A4%87%E9%87%87%E4%BD%93%E9%9F%B3%E9%A2%91%E6%95%B0%E6%8D%AE%E6%97%B6%EF%BC%8C%E8%BF%94%E5%9B%9E%E9%94%99%E8%AF%AF-35"><span class="nav-number">13.</span> <span class="nav-text">Q: 在从设备采体音频数据时，返回错误 -35</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E5%9C%A8%E7%BC%96%E7%A0%81%E6%97%B6%EF%BC%8C%E7%BC%96%E7%A0%81%E5%99%A8%E8%BF%94%E5%9B%9E-35-%E9%94%99%E8%AF%AF"><span class="nav-number">14.</span> <span class="nav-text">Q: 在编码时，编码器返回 -35 错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E9%87%87%E9%9B%86%E5%88%B0%E7%9A%84%E9%9F%B3%E9%A2%91%E6%95%B0%E6%8D%AE%E7%BC%96%E7%A0%81-AAC-%E6%97%B6%EF%BC%8C%E6%8A%A5%E6%97%A0%E6%B3%95%E6%89%BE%E5%88%B0libfdk-aac%E5%BA%93"><span class="nav-number">15.</span> <span class="nav-text">Q: 采集到的音频数据编码 AAC 时，报无法找到libfdk-aac库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E5%9C%A8Linux%E4%B8%AD%E4%BD%95%E9%87%87%E9%9B%86%E9%9F%B3%E9%A2%91%E6%95%B0%E6%8D%AE"><span class="nav-number">16.</span> <span class="nav-text">Q: 在Linux中何采集音频数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E5%9C%A8-Linux-%E4%B8%AD%E6%89%BE%E4%B8%8D%E5%88%B0-alsa-%E8%AE%BE%E5%A4%87"><span class="nav-number">17.</span> <span class="nav-text">Q: 在 Linux 中找不到 alsa 设备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E7%BC%96%E8%AF%91ffmpeg-%E6%97%B6-filter-%E7%BC%96%E8%AF%91%E4%B8%8D%E8%BF%87"><span class="nav-number">18.</span> <span class="nav-text">Q: 编译ffmpeg 时 filter 编译不过</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-Windows%E4%B8%8B%E7%BC%96%E8%AF%91ffmpeg"><span class="nav-number">19.</span> <span class="nav-text">Q: Windows下编译ffmpeg</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-AAC-%E7%BC%96%E7%A0%81%E4%B8%BA-AAC-HE-V2-%E6%97%B6%EF%BC%8C%E5%A3%B0%E9%9F%B3%E4%B8%8E%E5%8E%9F%E5%A7%8B%E5%A3%B0%E9%9F%B3%E4%B8%8D%E4%B8%80%E6%A0%B7"><span class="nav-number">20.</span> <span class="nav-text">Q: AAC 编码为 AAC_HE_V2 时，声音与原始声音不一样</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E5%BA%93%E5%B7%B2%E7%BB%8F%E5%AE%89%E8%A3%85%E5%A5%BD%E4%BA%86%EF%BC%8C%E4%BD%86%E4%BB%8D%E6%8A%A5%E6%89%BE%E4%B8%8D%E5%88%B0%E5%AE%83%E7%9A%84%E9%94%99%E8%AF%AF%EF%BC%9F"><span class="nav-number">21.</span> <span class="nav-text">Q: 库已经安装好了，但仍报找不到它的错误？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-libx264%E5%BA%93%E6%89%BE%E4%B8%8D%E5%88%B0%EF%BC%88-ERROR-libx264-not-found-%EF%BC%89"><span class="nav-number">22.</span> <span class="nav-text">Q: libx264库找不到（[ERROR: libx264 not found]）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E9%80%9A%E8%BF%87-avcodec-find-encoder-by-name-%E6%97%A0%E6%B3%95%E6%89%BE%E5%88%B0%E7%BC%96%E7%A0%81%E5%99%A8"><span class="nav-number">23.</span> <span class="nav-text">Q: 通过 avcodec_find_encoder_by_name() 无法找到编码器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E7%BC%96%E8%AF%91%E4%B8%8D%E5%87%BAffplay"><span class="nav-number">24.</span> <span class="nav-text">Q: 编译不出ffplay</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E9%9D%9EMac%E5%90%8C%E5%AD%A6%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%E6%9C%AC%E8%AF%BE%E7%A8%8B"><span class="nav-number">25.</span> <span class="nav-text">Q: 非Mac同学如何学习本课程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E5%9C%A8windows%E4%B8%8B%E7%9A%84mingw%E7%8E%AF%E5%A2%83%E4%B8%AD%E5%87%BA%E7%8E%B0%E4%B8%8B%E9%9D%A2%E9%94%99%E8%AF%AF%E8%AF%A5%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%EF%BC%9F"><span class="nav-number">26.</span> <span class="nav-text">Q: 在windows下的mingw环境中出现下面错误该如何解决？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Q-%E4%B8%BA%E4%BB%80%E4%B9%88-avformat-open-input%E8%BF%94%E5%9B%9E%E9%94%99%E8%AF%AF%E7%A0%81-22%EF%BC%9F"><span class="nav-number">27.</span> <span class="nav-text">Q: 为什么 avformat_open_input返回错误码 -22？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">28.</span> <span class="nav-text">参考</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="https://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="音视跳动" src="/images/avdancelogo.jpg"><p class="site-author-name" itemprop="name">音视跳动</p><div class="site-description" itemprop="description">传输最前沿的科技知识，学习音视频的圣地！ffmpeg, webrtc, H264, AAC</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">61</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">21</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">39</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/avdance" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;avdance" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/garrylea/posts" title="ZhiHu → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;garrylea&#x2F;posts" rel="noopener" target="_blank"><i class="fa fa-fw fa-zhihu"></i> ZhiHu</a></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><a href="https://www.beian.miit.gov.cn/" rel="noopener" target="_blank">京ICP备19056322号-1</a> <img src="/images/beianico.png" style="display:inline-block"><a href="https://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11011102001366" rel="noopener" target="_blank">京公网安备11011102001366号</a></div><div class="copyright"> &copy; <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">李超</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span title="站点总字数">257k</span></div><script>
  (function() {
    function leancloudSelector(url) {
      url = encodeURI(url);
      return document.getElementById(url).querySelector('.leancloud-visitors-count');
    }

    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.id);
      var title = visitors.dataset.flagTitle;

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url })))
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            leancloudSelector(url).innerText = counter.time + 1;
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              });
          } else {
              Counter('post', '/classes/Counter', { title, url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.id);
      });

      Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify({ url: { '$in': entries } })))
        .then(response => response.json())
        .then(({ results }) => {
          for (let url of entries) {
            let target = results.find(item => item.url === url);
            leancloudSelector(url).innerText = target ? target.time : 0;
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }

    let { app_id, app_key, server_url } = {"enable":true,"app_id":"Cu6h7B3RnNt3uEMrRWpVlIU6-gzGzoHsz","app_key":"5dKv9XFD2w3gjJnb0xnWIIWz","server_url":"https://leancloud.cn","security":false};
    function fetchData(api_server) {
      var Counter = (method, url, data) => {
        return fetch(`${api_server}/1.1${url}`, {
          method,
          headers: {
            'X-LC-Id'     : app_id,
            'X-LC-Key'    : app_key,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        //if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    }

    let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;

    if (api_server) {
      fetchData(api_server);
    } else {
      fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id)
        .then(response => response.json())
        .then(({ api_server }) => {
          fetchData('https://' + api_server);
        });
    }
  })();
</script></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/lozad.min.js"></script><script src="/js/utils.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("Cu6h7B3RnNt3uEMrRWpVlIU6-gzGzoHsz","5dKv9XFD2w3gjJnb0xnWIIWz")</script><script>function showTime(e){var t=new AV.Query(e),c=[],u=$(".leancloud_visitors");u.each(function(){c.push($(this).attr("id").trim())}),t.containedIn("url",c),t.find().done(function(e){var t=".leancloud-visitors-count";if(0!==e.length){for(var n=0;n<e.length;n++){var o=e[n],i=o.get("url"),s=o.get("time"),r=document.getElementById(i);$(r).find(t).text(s)}for(n=0;n<c.length;n++){i=c[n],r=document.getElementById(i);var l=$(r).find(t);""==l.text()&&l.text(0)}}else u.find(t).text(0)}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(i){var e=$(".leancloud_visitors"),s=e.attr("id").trim(),r=e.attr("data-flag-title").trim(),t=new AV.Query(i);t.equalTo("url",s),t.find({success:function(e){if(0<e.length){var t=e[0];t.fetchWhenSave(!0),t.increment("time"),t.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var n=new i,o=new AV.ACL;o.setPublicReadAccess(!0),o.setPublicWriteAccess(!0),n.setACL(o),n.set("title",r),n.set("url",s),n.set("time",1),n.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):1<$(".post-title-link").length&&showTime(e)})</script><link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.min.css"><script src="/lib/needsharebutton/needsharebutton.min.js"></script><script>flOptions={iconStyle:"box",boxForm:"horizontal",position:"topRight",networks:"Weibo,Wechat,QQZone"},new needShareButton("#needsharebutton-float",flOptions)</script><script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('/lib/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'Cu6h7B3RnNt3uEMrRWpVlIU6-gzGzoHsz',
      appKey     : '5dKv9XFD2w3gjJnb0xnWIIWz',
      placeholder: "畅所欲言？",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : false,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script></body></html>